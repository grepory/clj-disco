(System/getenv "ETCD_HOST")
(get (System/getenv) "ETCD_HOST")
(get (System/getenv) "ETCD_HOST" "127.0.0.1")
(get (System/getenv) "OWFJE" "127.0.0.1")
(require '[verschlimmbesserung.core :as v])
(str "http://" (get (System/getenv) "ETCD_HOST" "127.0.0.1") ":" (get (System/getenv) "ETCD_PORT" "2379"))
(def c (str "http://" (get (System/getenv) "ETCD_HOST" "127.0.0.1") ":" (get (System/getenv) "ETCD_PORT" "2379")))
(v/connect c)
(def etcd (v/connect c))
(get etcd ("/opsee.co/registrator/bartnet-redis"))
etcd
(get etcd "/opsee.co/registrator/bartnet-redis")
(defn service-path [s] (clojure.string/join "/" '(base-path, s)))
(service-path "bartnet-redis")
(defn service-path [s] (clojure.string/join "/" [base-path, s]))
(def base-path "/opsee.co/registrator")
(defn service-path [s] (clojure.string/join "/" [base-path, s]))
(service-path "bartnet-redis")
(def foo (atom nil))
(when-not @foo (reset! foo 0))
@foo
foo
(require '[clj-disco.core :as disco])
(ns clj-disco.core)
@client
client
(with-etcd (etcd/get @client "/"))
(with-etcd (etcd/create @client "/" "foo:123"))
(with-etcd (etcd/create! @client "/" "foo:123"))
(with-etcd (etcd/create! @client "/foo" "foo:123"))
(with-etcd (etcd/get @client "/foo"))
(with-etcd (etcd/create! @client "/opsee.co/registrator/foo/instance1" "foo:123"))
(get-service-endpoint "foo")
(with-etcd
    (let [bartnet-redis (etcd/get @client (service-path service-name))] bartnet-redis))
    (let [bartnet-redis (etcd/get @client (service-path "foo"))] bartnet-redis))
(let [bartnet-redis (etcd/get @client (service-path "foo"))] bartnet-redis)
(with-etcd (etcd/create! @client "/opsee.co/registrator/foo/instance2" "foo:234"))
(let [bartnet-redis (etcd/get @client (service-path "foo"))] bartnet-redis)
(seq (let [bartnet-redis (etcd/get @client (service-path "foo"))] bartnet-redis))
(rand-nth (seq (let [bartnet-redis (etcd/get @client (service-path "foo"))] bartnet-redis)))
(require '[clj-disco.core :as disco])
(disco/with-etcd (#'disco/etcd-create "/opsee.co/registrator/test-service/instance1" "foo:123")
)
(disco/with-etcd (#'disco/etcd-create "/opsee.co/registrator/test-service/instance1" "foo:123"))
(require '[clj-disco.core :as disco])
(disco/with-etcd (#'disco/etcd-create "/opsee.co/registrator/test-service/instance1" "foo:123"))
(macroexpand disco/with-etcd)
(macro-expand '(disco/with-etcd (#'disco/etcd-create "/opsee.co/registrator/test-service/instance1" "foo:123"))
)
(macroexpand '(disco/with-etcd (#'disco/etcd-create "/opsee.co/registrator/test-service/instance1" "foo:123")))
(ns clj-disco.core)
(reset! client nil)
(ns user)
(macroexpand '(disco/with-etcd (#'disco/etcd-create "/opsee.co/registrator/test-service/instance1" "foo:123")))
@disco/client
disco/client
(deref disco/client)
(require '[clj-disco.core :as disco])
(macroexpand '(disco/with-etcd (#'disco/etcd-create "/opsee.co/registrator/test-service/instance1" "foo:123")))
(disco/with-etcd (#'disco/etcd-create "/opsee.co/registrator/test-service/instance1" "foo:123"))
